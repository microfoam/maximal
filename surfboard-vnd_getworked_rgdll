#!/bin/bash
#
# Running this script should NOT be repeated within 12-18 minutes, the exact time interval depending on the speed of the computer.
# To explain why, please continue reading.
#
# First of all, this time interval is also dependent on the number of loops (2500 currently) and the default or opted Fisher-Yates string length,
#  which is currently set at 100 bp in order to identify "pre-whittled" micro-foam knots. So if these variables change, then the recommended 
#  wait time will also change.
#
# By waiting these few extra minutes between consecutive ragdoll runs, you ensure that each run is a uniquely shuffled string 
#  generated by the random seed, which is based on the sum of elapsed unix time in seconds plus loop number.
#
# Lastly, the addition of the loop number to time(0) is necessitated by the short time it takes to complete one loop (less than one second).
#
# So there you have it. Have fun! Throw your ragdoll self into the washing machine!
#

echo '                                               < vnd_getworked_ragdoll >' >> Corduroy.log

if [ ! -f maximal ]; then
	./surfboard-Pop_Up
fi
if [ -f Surf_wavereport.mha ]; then
        rm Surf_wavereport.mha
fi
if [ -f waves/foam_and_chowder.mha ]; then
        rm waves/foam_and_chowder.mha
fi

./surfboard-Pop_up

for i in {1..10000}
do
	echo "                                                                                                                                                $i"
	./maximal -Rn  -xX 2 -S $i waves/seals/vnd_ex3_Dmela.txt
	./maximal -Rn  -xX 2 -S $i waves/seals/vnd_ex3_Derec.txt
	./maximal -Rn  -xX 2 -S $i waves/seals/vnd_ex3_Dbiar.txt
	./maximal -Rn  -xX 2 -S $i waves/seals/vnd_ex3_Danan.txt
	./maximal -Rn  -xX 2 -S $i waves/sharks/nab_DWME_Dmela.txt
	./maximal -Rn  -xX 2 -S $i waves/sharks/vnd_NEE_Dmela.txt
	./maximal -Rn  -xX 2 -S $i waves/sharks/vnd_NEE_Derec.txt
	./maximal -Rn  -xX 2 -S $i waves/sharks/vnd_NEE_Dbiar.txt
	./maximal -RnC -xX 2 -S $i waves/seals/vnd_ex3_Dsimu.txt
	./maximal -RnC -xX 2 -S $i waves/seals/vnd_ex3_Dyaku.txt
	./maximal -RnC -xX 2 -S $i waves/seals/vnd_ex3_Dsuzu.txt
	./maximal -RnC -xX 2 -S $i waves/seals/vnd_ex3_Dbipe.txt
	./maximal -RnC -xX 2 -S $i waves/sharks/vnd_NEE_Dsimu.txt
	./maximal -RnC -xX 2 -S $i waves/sharks/vnd_NEE_Dyaku.txt
	./maximal -RnC -xX 2 -S $i waves/sharks/vnd_NEE_Dsuzu.txt
done

echo
echo
echo
echo "$0"
echo
echo
./surfboard-checkmha

